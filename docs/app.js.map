{"version":3,"sources":["webpack:///app.js","webpack:///./app.route.js","webpack:///./components/game.js","webpack:///./components/header.js","webpack:///./components/help.js","webpack:///./components/leaders.js","webpack:///./components/settings.js","webpack:///./services/modal.js","webpack:///./services/scramble.js","webpack:///./services/shuffle.js","webpack:///./services/stat.js","webpack:///./services/storage.js","webpack:///./app.js"],"names":["webpackJsonp","module","exports","__webpack_require__","routeConfig","$locationProvider","$routeProvider","when","template","otherwise","hashPrefix","Object","defineProperty","value","default","$inject","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","game","controller","GameCtrl","$scope","$timeout","$element","$document","modal","storage","scramble","shuffle","stat","this","$shuffle","$storage","getStorage","tileSize","Math","floor","getBoardSize","dimension","get","_this","getTiles","then","tiles","map","tile","position_x","x","position_y","y","on","keyDownHandler","emptyBlock","off","stopGame","_this2","array","p","find","canvas","startGame","t1","t2","_this3","_ref","_ref2","isGameRunning","doMove","isWin","gameTime","getGameTime","movesCount","getMovesCount","openWin","username","saveResult","XDistance","YDistance","XAllowMove","abs","YAllowMove","swapTiles","direction","scope","getDirection","keyCode","event","$apply","moveByKeyPress","$event","hammerDirection","header","HeaderCtrl","$location","path","help","leaders","LeadersCtrl","scores","score","forEach","push","settings","SettingsCtrl","boardSize","_showNumber","showNumber","_highlightRightPlace","highlightRightPlace","updateDimensionPreview","isLoading","generate","ctx","context","getContext","width","height","clearRect","putImageData","getImageData","set","val","modalCtrl","$modal","time","open","backdrop","keyboard","windowClass","controllerAs","resolve","result","e","getImage","$q","deferred","defer","img","Image","onload","src","promise","imagePromiseCache","maxFontSize","j","ratio","margin","drawImage","strokeRect","fontSize","num","centerX","centerY","strokeStyle","font","textAlign","lineWidth","strokeText","toString","tileCanvas","document","createElement","tileCtx","w","h","equalX","equalY","drawNumber","toDataURL","arguments","undefined","imagePromise","getTileAsCanvas","drawImagePart","random","drawHighlight","arr","a","$interval","startingTime","timerHandler","Date","endingTime","len","cancel","$localStorage","$default","_interopRequireDefault","obj","__esModule","_angular","_angular2","_angularRoute","_angularRoute2","_angularHammer","_angularHammer2","_app","_app2","_scramble","_scramble2","_storage","_storage2","_shuffle","_shuffle2","_stat","_stat2","_modal","_modal2","_header","_header2","_game","_game2","_leaders","_leaders2","_settings","_settings2","_help","_help2","config","service","component","bootstrap"],"mappings":"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","file":"app.js","sourcesContent":["webpackJsonp([0],[\n/* 0 */,\n/* 1 */,\n/* 2 */,\n/* 3 */,\n/* 4 */,\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = routeConfig;\nfunction routeConfig($locationProvider, $routeProvider) {\n  $routeProvider.when('/game', { template: '<game></game>' }).when('/leaders', { template: '<leaders></leaders>' }).when('/settings', { template: '<settings></settings>' }).when('/help', { template: '<help></help>' }).otherwise('/game');\n  $locationProvider.hashPrefix('');\n}\n\nrouteConfig.$inject = ['$locationProvider', '$routeProvider'];\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar game = {\n  template: '\\n\\t\\t<div class=\"game\">\\n\\t\\t\\n      <div class=\"row\">\\n        <div class=\"small-12 columns\">\\n          <h1>Game</h1>\\n          <hr />\\n          <div class=\"game-board\" hm-panend=\"$ctrl.onPan($event)\">\\n            <div class=\"tile\" ng-repeat=\"tile in $ctrl.tiles track by $index\"\\n              ng-style=\"{ transform: $ctrl.getTilePosition(tile) }\"\\n              ng-class=\"{ empty: tile.canvas === null }\"\\n              ng-click=\"$ctrl.moveByClick(tile)\">\\n              <!--hm-tap=\"$ctrl.moveByTap(tile)\"-->\\n              <img ng-src=\"{{ $ctrl.scramble.getImageFromTile(tile)}}\"\\n                   ng-style=\"{ width: $ctrl.tileSize, height: $ctrl.tileSize }\">\\n                   <!--<pre>{{ {x: tile.position_x, y:tile.position_y, s:$ctrl.tileSize} | json }}</pre>-->\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n      \\n      <br />\\n    \\n      <div class=\"row\">\\n        <div class=\"small-12 columns text-center\">\\n          <button class=\"button radius\" ng-click=\"$ctrl.startGame()\" ng-if=\"!$ctrl.stat.isGameRunning()\">\\n            <i class=\"fa fa-play\" aria-hidden=\"true\"></i>\\n            Start Game\\n          </button>\\n          <button class=\"button radius\" ng-click=\"$ctrl.endGame()\" ng-if=\"$ctrl.stat.isGameRunning()\">\\n            <i class=\"fa fa-stop\" aria-hidden=\"true\"></i>\\n            Stop Game\\n          </button>\\n          \\n          <h4 ng-if=\"$ctrl.stat.isGameRunning()\">\\n            <span>dimension: {{ $ctrl.$storage.dimension }},</span>\\n            <span>time: {{ $ctrl.stat.getGameTime() }} sec,</span>\\n            <span>moves count: {{ $ctrl.stat.getMovesCount() }}</span>\\n          </h4>\\n        </div>\\n      </div>\\n      \\n      <div class=\"row\" ng-if=\"false\">\\n        <div class=\"small-12 columns\">\\n          <p class=\"panel\">\\n            <ul>\\n              <li class=\"visible-for-small-only\">This text is shown only on a small screen.</li>\\n              <!--<li class=\"visible-for-medium-up\">This text is shown on medium screens and up.</li>-->\\n              <li class=\"visible-for-medium-only\">This text is shown only on a medium screen.</li>\\n              <!--<li class=\"visible-for-large-up\">This text is shown on large screens and up.</li>-->\\n              <li class=\"visible-for-large-only\">This text is shown only on a large screen.</li>\\n              <!--<li class=\"visible-for-xlarge-up\">This text is shown on xlarge screens and up.</li>-->\\n              <li class=\"visible-for-xlarge-only\">This text is shown only on an xlarge screen.</li>\\n              <!--<li class=\"visible-for-xxlarge-up\">This text is shown on xxlarge screens and up.</li>-->\\n            </ul>\\n          </p>\\n        </div>\\n      </div>\\n    </div>\\n\\t',\n\n  controller: function () {\n    _createClass(GameCtrl, null, [{\n      key: '$inject',\n      get: function get() {\n        return ['$scope', '$timeout', '$element', '$document', 'modal', 'storage', 'scramble', 'shuffle', 'stat'];\n      }\n    }]);\n\n    function GameCtrl($scope, $timeout, $element, $document, modal, storage, scramble, shuffle, stat) {\n      _classCallCheck(this, GameCtrl);\n\n      this.$scope = $scope;\n      this.$timeout = $timeout;\n      this.$element = $element;\n      this.$document = $document;\n      this.modal = modal;\n      this.scramble = scramble;\n      this.$shuffle = shuffle;\n      this.stat = stat;\n      this.$storage = storage.getStorage();\n      this.tileSize = Math.floor(storage.getBoardSize() / this.$storage.dimension);\n    }\n\n    _createClass(GameCtrl, [{\n      key: '$onInit',\n      value: function $onInit() {\n        var _this = this;\n\n        this.scramble.getTiles().then(function (tiles) {\n          _this.tiles = tiles.map(function (tile) {\n            tile.position_x = tile.x;\n            tile.position_y = tile.y;\n            return tile;\n          });\n        });\n        this.$document.on('keydown', this.keyDownHandler(this));\n        this.emptyBlock = null;\n      }\n    }, {\n      key: '$onDestroy',\n      value: function $onDestroy() {\n        this.$document.off('keydown', this.keyDownHandler(this));\n        this.stat.stopGame();\n      }\n    }, {\n      key: 'startGame',\n      value: function startGame() {\n        var _this2 = this;\n\n        var pseudoShuffle = false;\n\n        if (pseudoShuffle) {\n          this.swapTiles(this.tiles[this.tiles.length - 1], this.tiles[this.tiles.length - 2]);\n        } else {\n          this.$shuffle.array(this.tiles.map(function (tile) {\n            return {\n              x: tile.position_x,\n              y: tile.position_y\n            };\n          })).map(function (p, i) {\n            _this2.tiles[i].position_x = p.x;\n            _this2.tiles[i].position_y = p.y;\n          });\n        }\n\n        this.emptyBlock = this.tiles.find(function (tile) {\n          return tile.canvas === null;\n        });\n        this.stat.startGame();\n      }\n    }, {\n      key: 'endGame',\n      value: function endGame() {\n        for (var i = 0; i < this.tiles.length; i++) {\n          this.tiles[i].position_x = this.tiles[i].x;\n          this.tiles[i].position_y = this.tiles[i].y;\n        }\n\n        this.stat.stopGame();\n      }\n    }, {\n      key: 'swapTiles',\n      value: function swapTiles(t1, t2) {\n        var _this3 = this;\n\n        var _ref = [t2.position_x, t1.position_x];\n        t1.position_x = _ref[0];\n        t2.position_x = _ref[1];\n        var _ref2 = [t2.position_y, t1.position_y];\n        t1.position_y = _ref2[0];\n        t2.position_y = _ref2[1];\n\n        if (this.stat.isGameRunning()) {\n          this.stat.doMove();\n          if (this.stat.isWin(this.tiles)) {\n            this.stat.stopGame();\n            var dimension = this.$storage.dimension;\n            var gameTime = this.stat.getGameTime();\n            var movesCount = this.stat.getMovesCount();\n            this.modal.openWin(dimension, gameTime, movesCount).then(function (username) {\n              if (username) {\n                _this3.stat.saveResult(username, dimension, gameTime, movesCount);\n              }\n            });\n          }\n        }\n      }\n    }, {\n      key: 'moveByClick',\n      value: function moveByClick(tile) {\n        if (!this.stat.isGameRunning()) {\n          return;\n        }\n\n        var emptyBlock = this.emptyBlock;\n        if (emptyBlock) {\n          var XDistance = emptyBlock.position_x - tile.position_x;\n          var YDistance = emptyBlock.position_y - tile.position_y;\n          var XAllowMove = XDistance === 0 && Math.abs(YDistance) === 1;\n          var YAllowMove = YDistance === 0 && Math.abs(XDistance) === 1;\n\n          if (XAllowMove || YAllowMove) {\n            this.swapTiles(emptyBlock, tile);\n          }\n        }\n      }\n    }, {\n      key: 'getTilePosition',\n      value: function getTilePosition(tile) {\n        return 'translate3d(' + tile.position_x * this.tileSize + 'px, ' + tile.position_y * this.tileSize + 'px, 0px)';\n      }\n    }, {\n      key: 'moveByKeyPress',\n      value: function moveByKeyPress(direction) {\n        if (!this.stat.isGameRunning()) {\n          return;\n        }\n\n        var emptyBlock = this.emptyBlock;\n        var target = { x: emptyBlock.position_x, y: emptyBlock.position_y };\n        if (emptyBlock) {\n          switch (direction) {\n            case 'left':\n              target.x++;\n              break;\n            case 'top':\n              target.y++;\n              break;\n            case 'right':\n              target.x--;\n              break;\n            case 'bottom':\n              target.y--;\n              break;\n            default:\n              target = null;\n              break;\n          }\n        }\n\n        if (target) {\n          var tile = this.tiles.find(function (tile) {\n            return tile.position_x === target.x && tile.position_y === target.y;\n          });\n          if (tile) {\n            this.swapTiles(emptyBlock, tile);\n          }\n        }\n      }\n    }, {\n      key: 'keyDownHandler',\n      value: function keyDownHandler(scope) {\n        // arrow keys or WSAD\n        var getDirection = function getDirection(keyCode) {\n          switch (keyCode) {\n            case 37:\n            case 65:\n              return 'left';\n            case 38:\n            case 87:\n              return 'top';\n            case 39:\n            case 68:\n              return 'right';\n            case 40:\n            case 83:\n              return 'bottom';\n          }\n          return null;\n        };\n\n        return function (event) {\n          var direction = getDirection(event.keyCode);\n          if (direction) {\n            scope.$scope.$apply(function () {\n              scope.moveByKeyPress(direction);\n            });\n          }\n        };\n      }\n    }, {\n      key: 'onPan',\n      value: function onPan($event) {\n        // touch pan direction\n        var getDirection = function getDirection(hammerDirection) {\n          switch (hammerDirection) {\n            case 2:\n              return 'left';\n            case 8:\n              return 'top';\n            case 4:\n              return 'right';\n            case 16:\n              return 'bottom';\n          }\n          return null;\n        };\n        var direction = getDirection($event.direction);\n        if (direction) {\n          this.moveByKeyPress(direction);\n        }\n      }\n    }]);\n\n    return GameCtrl;\n  }()\n};\n\nexports.default = game;\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar header = {\n  template: '\\n\\t\\t<div class=\"row\">\\n      <div class=\"small-12 columns\">\\n        <a href=\"#/game\" class=\"button radius\" ng-class=\"{ \\'secondary\\': !$ctrl.isCurrent(\\'/game\\') }\">\\n          <i class=\"fa fa-gamepad\" aria-hidden=\"true\"></i>\\n          Game\\n        </a>\\n        <a href=\"#/leaders\" class=\"button radius\" ng-class=\"{ \\'secondary\\': !$ctrl.isCurrent(\\'/leaders\\') }\">\\n          <i class=\"fa fa-trophy\" aria-hidden=\"true\"></i>\\n          Leaders\\n        </a>\\n        <a href=\"#/help\" class=\"button radius info right\">\\n          <i class=\"fa fa-question\" aria-hidden=\"true\"></i>\\n          Help\\n        </a>\\n        <span class=\"right\">&nbsp;</span>\\n        <a href=\"#/settings\" class=\"button radius info right\">\\n          <i class=\"fa fa-cog\" aria-hidden=\"true\"></i>\\n          Settings\\n        </a>\\n      </div>\\n\\t\\t</div>\\n\\t',\n\n  controller: function () {\n    _createClass(HeaderCtrl, null, [{\n      key: '$inject',\n      get: function get() {\n        return ['$location'];\n      }\n    }]);\n\n    function HeaderCtrl($location) {\n      _classCallCheck(this, HeaderCtrl);\n\n      this.$location = $location;\n    }\n\n    _createClass(HeaderCtrl, [{\n      key: 'isCurrent',\n      value: function isCurrent(path) {\n        return this.$location.path() === path;\n      }\n    }]);\n\n    return HeaderCtrl;\n  }()\n};\n\nexports.default = header;\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar help = {\n  template: \"\\n\\t\\t<div class=\\\"row help\\\">\\n      <div class=\\\"small-12 columns\\\">\\n        <h1>Help</h1>\\n        <hr />\\n        \\n<p>        \\nThe app presents an image divided into 16 equal pieces enumerated from left to right, top to bottom. The last 16th piece is missing.\\nWhen the user hits \\u201CStart\\u201D the pieces are scrambled and the time counter starts counting until the user (using the arrow buttons) correctly rearranges the puzzle back to the initial state.\\nCheck Wiki for more detailed game info https://en.wikipedia.org/wiki/15_puzzle \\n</p>\\n<p>\\nAdditionally the user can go to another page which presents the leader board (that is 10 shortest games), the leader board also has a button to go back to the game page.\\nNote! Using canvas for the scrambled image beats the purpose of this exercise.\\n</p>\\n\\n<p>\\nBonus:\\n<p>\\n<ul> \\n<ol>Use of one of the popular frameworks \\u2013 React/Angular/Backbone/etc..</ol>\\n<ol>Use of swipe gestures, responsive design and in general the app should work on mobile devices</ol>\\n<ol>Use of Bower or any other package manager</ol>\\n<ol>Use of the local storage for the results</ol>\\n<ol>Use key strokes (up down left right)</ol>\\n<ol>Use CSS animation</ol>\\n<ol>Make it possible to set the game board dimensions</ol>\\n<ol>Present your solution as a git project</ol>\\n</ul>\\n\\n<p>\\nYou are allowed to use any frameworks, libraries or modules.        \\n</p>\\n     \\n      </div>\\n\\t\\t</div>\\n\\t\"\n};\n\nexports.default = help;\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar leaders = {\n  template: '\\n\\t\\t<div class=\"row leaders\">\\n      <div class=\"small-12 columns\">\\n        <h1>Leaders</h1>\\n        <hr />\\n        <ul class=\"unstyled-list\">\\n            <li ng-repeat=\"(dimension, scoreList) in $ctrl.scores\">\\n                <h2>Dimension: {{ dimension }}</h2>\\n                 <ul class=\"unstyled-list\">\\n                    <li ng-repeat=\"score in scoreList track by $index\">\\n                        <span>username <strong>{{ score.username || \\'unknown\\' }}</strong></span>\\n                        <span>time <strong>{{ score.gameTime }}</strong> sec</span>\\n                        <span>movesCount <strong>{{ score.movesCount }}</strong></span>\\n                        <span>date <strong>{{ score.time | date:\\'medium\\'}}</strong></span>\\n                    </li>\\n                </ul>\\n            </li>\\n        </ul>\\n      </div>\\n\\t\\t</div>\\n\\t',\n\n  controller: function () {\n    _createClass(LeadersCtrl, null, [{\n      key: '$inject',\n      get: function get() {\n        return ['storage'];\n      }\n    }]);\n\n    function LeadersCtrl(storage) {\n      var _this = this;\n\n      _classCallCheck(this, LeadersCtrl);\n\n      this.$storage = storage.getStorage();\n      this.scores = {};\n      this.$storage.score.forEach(function (score) {\n        if (!_this.scores[score.dimension]) {\n          _this.scores[score.dimension] = [];\n        }\n        _this.scores[score.dimension].push(score);\n      });\n    }\n\n    return LeadersCtrl;\n  }()\n};\n\nexports.default = leaders;\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar settings = {\n  template: '\\n\\t\\t<div class=\"row settings\">\\n      <div class=\"small-12 columns\">\\n        <h1>Settings</h1>\\n        <hr />\\n        <div class=\"dimension-preview\" ng-if=\"!$ctrl.isLoading\">\\n            <canvas></canvas>\\n        </div>\\n        <div class=\"dimension-preview-loader\" ng-if=\"$ctrl.isLoading\">\\n            <i class=\"fa fa-refresh fa-spin fa-3x fa-fw\"></i>\\n        </div>\\n        <h2>\\n          <label>\\n            Board dimensions\\n            <input type=\"range\" min=\"2\" max=\"10\" ng-model=\"$ctrl.dimension\" ng-change=\"$ctrl.updateDimensionPreview()\">\\n            <span>{{ $ctrl.dimension }}</span>\\n          </label>\\n        </h2>\\n        <h2 ng-click=\"$ctrl.highlightRightPlace = !$ctrl.highlightRightPlace\">\\n          <label>\\n            <i class=\"fa fa-check-square-o\" aria-hidden=\"true\" ng-show=\"$ctrl.highlightRightPlace\"></i>\\n            <i class=\"fa fa-square-o\" aria-hidden=\"true\" ng-show=\"!$ctrl.highlightRightPlace\"></i>\\n            Highlight tile in right place (in this example used random color)\\n          </label>\\n        </h2>\\n        <h2 ng-click=\"$ctrl.showNumber = !$ctrl.showNumber\">\\n          <label>\\n            <i class=\"fa fa-check-square-o\" aria-hidden=\"true\" ng-show=\"$ctrl.showNumber\"></i>\\n            <i class=\"fa fa-square-o\" aria-hidden=\"true\" ng-show=\"!$ctrl.showNumber\"></i>\\n            Show Numbers\\n          </label>\\n        </h2>\\n       </div>\\n\\t\\t</div>\\n\\t',\n\n  controller: function () {\n    _createClass(SettingsCtrl, null, [{\n      key: '$inject',\n      get: function get() {\n        return ['$timeout', '$element', '$scope', 'storage', 'scramble'];\n      }\n    }]);\n\n    function SettingsCtrl($timeout, $element, $scope, storage, scramble) {\n      _classCallCheck(this, SettingsCtrl);\n\n      this.$timeout = $timeout;\n      this.$element = $element;\n      this.$scope = $scope;\n      this.scramble = scramble;\n      this.$storage = storage.getStorage();\n      this.boardSize = storage.getBoardSize();\n    }\n\n    _createClass(SettingsCtrl, [{\n      key: '$onInit',\n      value: function $onInit() {\n        this.dimension = this.$storage.dimension;\n        this._showNumber = this.$storage.showNumber;\n        this._highlightRightPlace = this.$storage.highlightRightPlace;\n        this.updateDimensionPreview();\n      }\n    }, {\n      key: 'updateDimensionPreview',\n      value: function updateDimensionPreview() {\n        var _this = this;\n\n        this.isLoading = true;\n        this.$storage.dimension = this.dimension;\n        this.scramble.generate(this.dimension, this._showNumber, this._highlightRightPlace).then(function (ctx) {\n          _this.isLoading = false;\n          return _this.$timeout(function () {\n            return ctx;\n          }, 0);\n        }).then(function (ctx) {\n          var canvas = _this.$element.find('canvas')[0];\n          var context = canvas.getContext('2d');\n          canvas.width = _this.boardSize;\n          canvas.height = _this.boardSize;\n          context.clearRect(0, 0, canvas.width, canvas.height);\n          context.putImageData(ctx.getImageData(0, 0, canvas.width, canvas.height), 0, 0);\n        });\n      }\n    }, {\n      key: 'highlightRightPlace',\n      get: function get() {\n        return this._highlightRightPlace;\n      },\n      set: function set(val) {\n        this._highlightRightPlace = val;\n        this.$storage.highlightRightPlace = val;\n        this.updateDimensionPreview();\n      }\n    }, {\n      key: 'showNumber',\n      get: function get() {\n        return this._showNumber;\n      },\n      set: function set(val) {\n        this._showNumber = val;\n        this.$storage.showNumber = val;\n        this.updateDimensionPreview();\n      }\n    }]);\n\n    return SettingsCtrl;\n  }()\n};\n\nexports.default = settings;\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar modalCtrl = function () {\n  _createClass(modalCtrl, null, [{\n    key: '$inject',\n    get: function get() {\n      return ['score'];\n    }\n  }]);\n\n  function modalCtrl(score) {\n    _classCallCheck(this, modalCtrl);\n\n    this.score = score;\n  }\n\n  return modalCtrl;\n}();\n\nvar modal = function () {\n  _createClass(modal, null, [{\n    key: '$inject',\n    get: function get() {\n      return ['$modal'];\n    }\n  }]);\n\n  function modal($modal) {\n    _classCallCheck(this, modal);\n\n    this.$modal = $modal;\n  }\n\n  _createClass(modal, [{\n    key: 'openWin',\n    value: function openWin(dimension, time, movesCount) {\n      return this.$modal.open({\n        template: '\\n        <div>\\n          <h2>You win!</h2>\\n          <h4>Your result: </h4>\\n          <p>\\n            <span>dimension: <strong>{{ modalCtrl.score.dimension}}</strong></span>\\n            <span>time: <strong>{{ modalCtrl.score.time}}</strong> sec</span>\\n            <span>moves: <strong>{{ modalCtrl.score.movesCount}}</strong></span>\\n          </p>\\n          <h3>Please, enter your name</h3>\\n          <input type=\"text\" ng-model=\"modalCtrl.name\" style=\"font-size: 2em;\" autofocus />\\n          <button class=\"button\" ng-click=\"$close(modalCtrl.name)\">OK</button>\\n          <a class=\"close-reveal-modal\" ng-click=\"$dismiss()\">&#215;</a>\\n        </div>\\n      ',\n        backdrop: 'static',\n        keyboard: false,\n        windowClass: 'tiny',\n        controllerAs: 'modalCtrl',\n        controller: modalCtrl,\n        resolve: {\n          score: function score() {\n            return { dimension: dimension, time: time, movesCount: movesCount };\n          }\n        }\n      }).result.then(function (result) {\n        return result;\n      }, function (e) {\n        return e;\n      });\n    }\n  }]);\n\n  return modal;\n}();\n\nexports.default = modal;\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar getImage = function getImage($q) {\n  var deferred = $q.defer();\n  var img = new Image();\n  img.onload = function () {\n    deferred.resolve(this);\n  };\n  img.src = 'images/nature.jpg';\n  return deferred.promise;\n};\n\nvar scramble = function () {\n  _createClass(scramble, null, [{\n    key: '$inject',\n    get: function get() {\n      return ['$q', 'storage'];\n    }\n  }]);\n\n  function scramble($q, storage) {\n    _classCallCheck(this, scramble);\n\n    this.$q = $q;\n    this.$storage = storage.getStorage();\n    this.imagePromiseCache = null;\n    this.tiles = [];\n    this.maxFontSize = 72;\n  }\n\n  _createClass(scramble, [{\n    key: 'imagePromise',\n    value: function imagePromise() {\n      if (!this.imagePromiseCache) {\n        this.imagePromiseCache = getImage(this.$q);\n      }\n      return this.imagePromiseCache;\n    }\n  }, {\n    key: 'getTiles',\n    value: function getTiles() {\n      var _this = this;\n\n      if (this.tiles.length) {\n        return this.$q.when(this.tiles);\n      } else {\n        return this.generate(this.$storage.dimension, this.$storage.showNumber, this.$storage.highlightRightPlace).then(function () {\n          return _this.tiles;\n        });\n      }\n    }\n  }, {\n    key: 'drawImagePart',\n    value: function drawImagePart(ctx, img, i, j, tileSize, ratio, margin) {\n      ctx.drawImage(img, i * tileSize * ratio, // image-x\n      j * tileSize * ratio, // image-y\n      tileSize * ratio, // image-width\n      tileSize * ratio, // image-height\n      i * tileSize + margin, // canvas-x\n      j * tileSize + margin, // canvas-y\n      tileSize - margin * 2, // canvas-width\n      tileSize - margin * 2);\n    }\n  }, {\n    key: 'drawHighlight',\n    value: function drawHighlight(ctx, i, j, tileSize, margin) {\n      ctx.strokeRect(i * tileSize + margin, // canvas-x\n      j * tileSize + margin, // canvas-y\n      tileSize - margin * 2, // canvas-width\n      tileSize - margin * 2 // canvas-height\n      );\n    }\n  }, {\n    key: 'drawNumber',\n    value: function drawNumber(ctx, fontSize, num, centerX, centerY) {\n      var strokeStyle = ctx.strokeStyle;\n      ctx.font = fontSize + 'px Arial';\n      ctx.textAlign = 'center';\n      ctx.lineWidth = 1;\n      ctx.strokeStyle = 'black';\n      ctx.strokeText(num.toString(), centerX + 1, centerY + 1);\n      ctx.lineWidth = 1;\n      ctx.strokeStyle = strokeStyle;\n      ctx.strokeText(num.toString(), centerX, centerY);\n    }\n  }, {\n    key: 'getTileAsCanvas',\n    value: function getTileAsCanvas(img, i, j, tileSize, ratio, margin) {\n      var tileCanvas = document.createElement(\"canvas\");\n      var tileCtx = tileCanvas.getContext('2d');\n      tileCanvas.width = tileSize;\n      tileCanvas.height = tileSize;\n      tileCtx.clearRect(0, 0, tileCanvas.width, tileCanvas.height);\n      tileCtx.drawImage(img, i * tileSize * ratio, // image-x\n      j * tileSize * ratio, // image-y\n      tileSize * ratio, // image-width\n      tileSize * ratio, // image-height\n      margin, // canvas-x\n      margin, // canvas-y\n      tileSize - margin * 2, // canvas-width\n      tileSize - margin * 2);\n      return tileCanvas;\n    }\n  }, {\n    key: 'getImageFromTile',\n    value: function getImageFromTile(tile) {\n      if (tile.canvas) {\n        var margin = 3;\n        var w = tile.canvas.width;\n        var h = tile.canvas.height;\n\n        var canvas = document.createElement(\"canvas\");\n        var ctx = canvas.getContext('2d');\n\n        canvas.width = w;\n        canvas.height = h;\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n        ctx.drawImage(tile.canvas, 0, 0, w, h, 0, 0, w, h);\n\n        if (this.$storage.highlightRightPlace) {\n          var equalX = tile.x === tile.position_x;\n          var equalY = tile.y === tile.position_y;\n          ctx.strokeStyle = equalX && equalY ? 'green' : 'red';\n          ctx.strokeRect(margin, margin, w - margin * 2, h - margin * 2);\n        } else {\n          ctx.strokeStyle = 'black';\n        }\n\n        if (this.$storage.showNumber) {\n          var fontSize = this.maxFontSize / this.$storage.dimension * 2;\n          var centerX = w / 2;\n          var centerY = h / 2 + fontSize / 2;\n          var num = tile.y * this.$storage.dimension + tile.x + 1;\n          this.drawNumber(ctx, fontSize, num, centerX, centerY);\n        }\n\n        var a = canvas.toDataURL('image/png', false);\n        //let b = ctx.getImageData(0, 0, canvas.width, canvas.height);\n        //debugger;\n        return a;\n      } else {\n        return null;\n      }\n    }\n  }, {\n    key: 'generate',\n    value: function generate() {\n      var dimension = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 4;\n\n      var _this2 = this;\n\n      var showNumber = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      var highlightRightPlace = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n\n      return this.imagePromise().then(function (img) {\n        _this2.tiles = [];\n\n        var previewSize = 480;\n        var margin = 3;\n        var tileSize = Math.floor(previewSize / dimension);\n        var ratio = img.width / previewSize;\n\n        var canvas = document.createElement(\"canvas\");\n        var ctx = canvas.getContext('2d');\n\n        canvas.width = previewSize;\n        canvas.height = previewSize;\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n        for (var i = 0; i < dimension; i++) {\n          for (var j = 0; j < dimension; j++) {\n            if (i === dimension - 1 && j === dimension - 1) {\n              _this2.tiles.push({ x: i, y: j, canvas: null });\n              continue;\n            }\n            _this2.tiles.push({ x: i, y: j, canvas: _this2.getTileAsCanvas(img, i, j, tileSize, ratio, margin) });\n            _this2.drawImagePart(ctx, img, i, j, tileSize, ratio, margin);\n            if (highlightRightPlace) {\n              ctx.strokeStyle = Math.random() > 0.5 ? 'red' : 'green';\n              _this2.drawHighlight(ctx, i, j, tileSize, margin);\n            } else {\n              ctx.strokeStyle = 'black';\n            }\n            if (showNumber) {\n              var fontSize = _this2.maxFontSize / dimension * 2;\n              var centerX = i * tileSize + tileSize / 2;\n              var centerY = j * tileSize + tileSize / 2 + fontSize / 2;\n              var num = j * dimension + i + 1;\n              _this2.drawNumber(ctx, fontSize, num, centerX, centerY);\n            }\n          }\n        }\n\n        return ctx;\n      });\n    }\n  }]);\n\n  return scramble;\n}();\n\nexports.default = scramble;\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar shuffle = function () {\n  function shuffle() {\n    _classCallCheck(this, shuffle);\n  }\n\n  _createClass(shuffle, [{\n    key: \"array\",\n    value: function array(arr) {\n      // http://stackoverflow.com/questions/6274339/how-can-i-shuffle-an-array\n      var shuffleArray = function shuffleArray(a) {\n        for (var i = a.length; i; i--) {\n          var j = Math.floor(Math.random() * i);\n          var _ref = [a[j], a[i - 1]];\n          a[i - 1] = _ref[0];\n          a[j] = _ref[1];\n        }\n        return a;\n      };\n      return shuffleArray(arr);\n    }\n  }]);\n\n  return shuffle;\n}();\n\nexports.default = shuffle;\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar stat = function () {\n  _createClass(stat, null, [{\n    key: '$inject',\n    get: function get() {\n      return ['$interval', 'storage'];\n    }\n  }]);\n\n  function stat($interval, storage) {\n    _classCallCheck(this, stat);\n\n    this.$interval = $interval;\n    this.$storage = storage.getStorage();\n    this.startingTime = null;\n    this.movesCount = 0;\n    this.timerHandler = null;\n  }\n\n  _createClass(stat, [{\n    key: 'startGame',\n    value: function startGame() {\n      var _this = this;\n\n      this.startingTime = +new Date();\n      this.endingTime = +new Date();\n      //this.endingTime = 0;\n      this.movesCount = 0;\n      this.timerHandler = this.$interval(function () {\n        //this.endingTime++;\n        _this.endingTime = +new Date();\n      }, 1000);\n    }\n  }, {\n    key: 'getMovesCount',\n    value: function getMovesCount() {\n      return this.movesCount;\n    }\n  }, {\n    key: 'getGameTime',\n    value: function getGameTime() {\n      return Math.floor((this.endingTime - this.startingTime) / 1000);\n      //return this.endingTime;\n    }\n  }, {\n    key: 'isGameRunning',\n    value: function isGameRunning() {\n      return !!this.timerHandler;\n    }\n  }, {\n    key: 'doMove',\n    value: function doMove() {\n      this.movesCount++;\n    }\n  }, {\n    key: 'isWin',\n    value: function isWin(tiles) {\n      var len = tiles.length;\n      for (var i = 0; i < len; i++) {\n        if (tiles[i].x !== tiles[i].position_x) {\n          return false;\n        }\n        if (tiles[i].y !== tiles[i].position_y) {\n          return false;\n        }\n      }\n      return true;\n    }\n  }, {\n    key: 'stopGame',\n    value: function stopGame() {\n      this.$interval.cancel(this.timerHandler);\n      this.timerHandler = undefined;\n    }\n  }, {\n    key: 'saveResult',\n    value: function saveResult(username, dimension, gameTime, movesCount) {\n      var time = +new Date();\n      this.$storage.score.push({ username: username, dimension: dimension, gameTime: gameTime, movesCount: movesCount, time: time });\n    }\n  }]);\n\n  return stat;\n}();\n\nexports.default = stat;\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar storage = function () {\n  _createClass(storage, null, [{\n    key: \"$inject\",\n    get: function get() {\n      return ['$localStorage'];\n    }\n  }]);\n\n  function storage($localStorage) {\n    _classCallCheck(this, storage);\n\n    this.$storage = $localStorage.$default({\n      dimension: 4, // standard value for 15-puzzle\n      showNumber: true,\n      highlightRightPlace: true,\n      score: [\n      // predefined results\n      { \"username\": \"Georgy\", \"dimension\": 4, \"gameTime\": 20, \"movesCount\": 10, \"time\": 1494096553227 }]\n    });\n  }\n\n  _createClass(storage, [{\n    key: \"getStorage\",\n    value: function getStorage() {\n      return this.$storage;\n    }\n  }, {\n    key: \"getBoardSize\",\n    value: function getBoardSize() {\n      // check $boardSize sass variable\n      return 480;\n    }\n  }]);\n\n  return storage;\n}();\n\nexports.default = storage;\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 17 */,\n/* 18 */,\n/* 19 */,\n/* 20 */,\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n// libs\n\nvar _angular = __webpack_require__(0);\n\nvar _angular2 = _interopRequireDefault(_angular);\n\nvar _angularRoute = __webpack_require__(3);\n\nvar _angularRoute2 = _interopRequireDefault(_angularRoute);\n\nvar _angularHammer = __webpack_require__(2);\n\nvar _angularHammer2 = _interopRequireDefault(_angularHammer);\n\n__webpack_require__(1);\n\n__webpack_require__(4);\n\nvar _app = __webpack_require__(5);\n\nvar _app2 = _interopRequireDefault(_app);\n\nvar _scramble = __webpack_require__(12);\n\nvar _scramble2 = _interopRequireDefault(_scramble);\n\nvar _storage = __webpack_require__(15);\n\nvar _storage2 = _interopRequireDefault(_storage);\n\nvar _shuffle = __webpack_require__(13);\n\nvar _shuffle2 = _interopRequireDefault(_shuffle);\n\nvar _stat = __webpack_require__(14);\n\nvar _stat2 = _interopRequireDefault(_stat);\n\nvar _modal = __webpack_require__(11);\n\nvar _modal2 = _interopRequireDefault(_modal);\n\nvar _header = __webpack_require__(7);\n\nvar _header2 = _interopRequireDefault(_header);\n\nvar _game = __webpack_require__(6);\n\nvar _game2 = _interopRequireDefault(_game);\n\nvar _leaders = __webpack_require__(9);\n\nvar _leaders2 = _interopRequireDefault(_leaders);\n\nvar _settings = __webpack_require__(10);\n\nvar _settings2 = _interopRequireDefault(_settings);\n\nvar _help = __webpack_require__(8);\n\nvar _help2 = _interopRequireDefault(_help);\n\n__webpack_require__(16);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// components\n\n\n// config\n\n\n// vendors\n_angular2.default.module('game', [_angularRoute2.default, _angularHammer2.default, 'ngStorage', 'mm.foundation']).config(_app2.default).service('scramble', _scramble2.default).service('storage', _storage2.default).service('shuffle', _shuffle2.default).service('stat', _stat2.default).service('modal', _modal2.default).component('header', _header2.default).component('game', _game2.default).component('leaders', _leaders2.default).component('settings', _settings2.default).component('help', _help2.default);\n\n// services\n\n\n_angular2.default.bootstrap(document, ['game']);\n\n/***/ })\n],[21]);\n\n\n// WEBPACK FOOTER //\n// app.js","export default  function routeConfig($locationProvider, $routeProvider) {\n  $routeProvider\n    .when('/game', {template: '<game></game>'})\n    .when('/leaders', {template: '<leaders></leaders>'})\n    .when('/settings', {template: '<settings></settings>'})\n    .when('/help', {template: '<help></help>'})\n    .otherwise('/game');\n  $locationProvider.hashPrefix('');\n}\n\nrouteConfig.$inject = ['$locationProvider', '$routeProvider'];\n\n\n// WEBPACK FOOTER //\n// ./app.route.js","const game = {\n  template: `\n\t\t<div class=\"game\">\n\t\t\n      <div class=\"row\">\n        <div class=\"small-12 columns\">\n          <h1>Game</h1>\n          <hr />\n          <div class=\"game-board\" hm-panend=\"$ctrl.onPan($event)\">\n            <div class=\"tile\" ng-repeat=\"tile in $ctrl.tiles track by $index\"\n              ng-style=\"{ transform: $ctrl.getTilePosition(tile) }\"\n              ng-class=\"{ empty: tile.canvas === null }\"\n              ng-click=\"$ctrl.moveByClick(tile)\">\n              <!--hm-tap=\"$ctrl.moveByTap(tile)\"-->\n              <img ng-src=\"{{ $ctrl.scramble.getImageFromTile(tile)}}\"\n                   ng-style=\"{ width: $ctrl.tileSize, height: $ctrl.tileSize }\">\n                   <!--<pre>{{ {x: tile.position_x, y:tile.position_y, s:$ctrl.tileSize} | json }}</pre>-->\n            </div>\n          </div>\n        </div>\n      </div>\n      \n      <br />\n    \n      <div class=\"row\">\n        <div class=\"small-12 columns text-center\">\n          <button class=\"button radius\" ng-click=\"$ctrl.startGame()\" ng-if=\"!$ctrl.stat.isGameRunning()\">\n            <i class=\"fa fa-play\" aria-hidden=\"true\"></i>\n            Start Game\n          </button>\n          <button class=\"button radius\" ng-click=\"$ctrl.endGame()\" ng-if=\"$ctrl.stat.isGameRunning()\">\n            <i class=\"fa fa-stop\" aria-hidden=\"true\"></i>\n            Stop Game\n          </button>\n          \n          <h4 ng-if=\"$ctrl.stat.isGameRunning()\">\n            <span>dimension: {{ $ctrl.$storage.dimension }},</span>\n            <span>time: {{ $ctrl.stat.getGameTime() }} sec,</span>\n            <span>moves count: {{ $ctrl.stat.getMovesCount() }}</span>\n          </h4>\n        </div>\n      </div>\n      \n      <div class=\"row\" ng-if=\"false\">\n        <div class=\"small-12 columns\">\n          <p class=\"panel\">\n            <ul>\n              <li class=\"visible-for-small-only\">This text is shown only on a small screen.</li>\n              <!--<li class=\"visible-for-medium-up\">This text is shown on medium screens and up.</li>-->\n              <li class=\"visible-for-medium-only\">This text is shown only on a medium screen.</li>\n              <!--<li class=\"visible-for-large-up\">This text is shown on large screens and up.</li>-->\n              <li class=\"visible-for-large-only\">This text is shown only on a large screen.</li>\n              <!--<li class=\"visible-for-xlarge-up\">This text is shown on xlarge screens and up.</li>-->\n              <li class=\"visible-for-xlarge-only\">This text is shown only on an xlarge screen.</li>\n              <!--<li class=\"visible-for-xxlarge-up\">This text is shown on xxlarge screens and up.</li>-->\n            </ul>\n          </p>\n        </div>\n      </div>\n    </div>\n\t`,\n  \n  controller: class GameCtrl {\n    static get $inject() {\n      return ['$scope', '$timeout', '$element', '$document', 'modal', 'storage', 'scramble', 'shuffle', 'stat'];\n    }\n    \n    constructor($scope, $timeout, $element, $document, modal, storage, scramble, shuffle, stat) {\n      this.$scope = $scope;\n      this.$timeout = $timeout;\n      this.$element = $element;\n      this.$document = $document;\n      this.modal = modal;\n      this.scramble = scramble;\n      this.$shuffle = shuffle;\n      this.stat = stat;\n      this.$storage = storage.getStorage();\n      this.tileSize = Math.floor(storage.getBoardSize() / this.$storage.dimension);\n    }\n    \n    $onInit() {\n      this.scramble.getTiles().then((tiles) => {\n        this.tiles = tiles.map((tile) => {\n          tile.position_x = tile.x;\n          tile.position_y = tile.y;\n          return tile;\n        });\n      });\n      this.$document.on('keydown', this.keyDownHandler(this));\n      this.emptyBlock = null;\n    }\n    \n    $onDestroy() {\n      this.$document.off('keydown', this.keyDownHandler(this));\n      this.stat.stopGame();\n    };\n    \n    startGame() {\n      const pseudoShuffle = false;\n      \n      if (pseudoShuffle) {\n        this.swapTiles(\n          this.tiles[this.tiles.length - 1],\n          this.tiles[this.tiles.length - 2]\n        );\n      } else {\n        this.$shuffle.array(this.tiles.map((tile) => {\n          return {\n            x: tile.position_x,\n            y: tile.position_y\n          }\n        })).map((p, i) => {\n          this.tiles[i].position_x = p.x;\n          this.tiles[i].position_y = p.y;\n        });\n      }\n      \n      this.emptyBlock = this.tiles.find((tile) => tile.canvas === null);\n      this.stat.startGame();\n    }\n    \n    endGame() {\n      for (let i = 0; i < this.tiles.length; i++) {\n        this.tiles[i].position_x = this.tiles[i].x;\n        this.tiles[i].position_y = this.tiles[i].y;\n      }\n      \n      this.stat.stopGame();\n    }\n    \n    swapTiles(t1, t2) {\n      [t1.position_x, t2.position_x] = [t2.position_x, t1.position_x];\n      [t1.position_y, t2.position_y] = [t2.position_y, t1.position_y];\n      if (this.stat.isGameRunning()) {\n        this.stat.doMove();\n        if (this.stat.isWin(this.tiles)) {\n          this.stat.stopGame();\n          const dimension = this.$storage.dimension;\n          const gameTime = this.stat.getGameTime();\n          const movesCount = this.stat.getMovesCount();\n          this.modal.openWin(dimension, gameTime, movesCount).then((username) => {\n            if (username) {\n              this.stat.saveResult(username, dimension, gameTime, movesCount);\n            }\n          });\n        }\n      }\n    }\n    \n    moveByClick(tile) {\n      if (!this.stat.isGameRunning()) {\n        return;\n      }\n      \n      let emptyBlock = this.emptyBlock;\n      if (emptyBlock) {\n        const XDistance = emptyBlock.position_x - tile.position_x;\n        const YDistance = emptyBlock.position_y - tile.position_y;\n        const XAllowMove = (XDistance === 0 && Math.abs(YDistance) === 1);\n        const YAllowMove = (YDistance === 0 && Math.abs(XDistance) === 1);\n        \n        if (XAllowMove || YAllowMove) {\n          this.swapTiles(emptyBlock, tile);\n        }\n      }\n    }\n    \n    getTilePosition(tile) {\n      return `translate3d(${tile.position_x * this.tileSize}px, ${tile.position_y * this.tileSize}px, 0px)`;\n    }\n    \n    moveByKeyPress(direction) {\n      if (!this.stat.isGameRunning()) {\n        return;\n      }\n      \n      let emptyBlock = this.emptyBlock;\n      let target = {x: emptyBlock.position_x, y: emptyBlock.position_y};\n      if (emptyBlock) {\n        switch (direction) {\n          case 'left':\n            target.x++;\n            break;\n          case 'top':\n            target.y++;\n            break;\n          case 'right':\n            target.x--;\n            break;\n          case 'bottom':\n            target.y--;\n            break;\n          default:\n            target = null;\n            break;\n        }\n      }\n      \n      if (target) {\n        let tile = this.tiles.find((tile) => tile.position_x === target.x && tile.position_y === target.y);\n        if (tile) {\n          this.swapTiles(emptyBlock, tile);\n        }\n      }\n    }\n    \n    keyDownHandler(scope) {\n      // arrow keys or WSAD\n      const getDirection = (keyCode) => {\n        switch (keyCode) {\n          case 37:\n          case 65:\n            return 'left';\n          case 38:\n          case 87:\n            return 'top';\n          case 39:\n          case 68:\n            return 'right';\n          case 40:\n          case 83:\n            return 'bottom';\n        }\n        return null;\n      };\n      \n      return function (event) {\n        let direction = getDirection(event.keyCode);\n        if (direction) {\n          scope.$scope.$apply(() => {\n            scope.moveByKeyPress(direction);\n          });\n        }\n      }\n    }\n    \n    onPan($event) {\n      // touch pan direction\n      const getDirection = (hammerDirection) => {\n        switch (hammerDirection) {\n          case 2:\n            return 'left';\n          case 8:\n            return 'top';\n          case 4:\n            return 'right';\n          case 16:\n            return 'bottom';\n        }\n        return null;\n      };\n      let direction = getDirection($event.direction);\n      if (direction) {\n        this.moveByKeyPress(direction);\n      }\n    }\n  }\n};\n\nexport default game;\n\n\n\n// WEBPACK FOOTER //\n// ./components/game.js","const header = {\n  template: `\n\t\t<div class=\"row\">\n      <div class=\"small-12 columns\">\n        <a href=\"#/game\" class=\"button radius\" ng-class=\"{ 'secondary': !$ctrl.isCurrent('/game') }\">\n          <i class=\"fa fa-gamepad\" aria-hidden=\"true\"></i>\n          Game\n        </a>\n        <a href=\"#/leaders\" class=\"button radius\" ng-class=\"{ 'secondary': !$ctrl.isCurrent('/leaders') }\">\n          <i class=\"fa fa-trophy\" aria-hidden=\"true\"></i>\n          Leaders\n        </a>\n        <a href=\"#/help\" class=\"button radius info right\">\n          <i class=\"fa fa-question\" aria-hidden=\"true\"></i>\n          Help\n        </a>\n        <span class=\"right\">&nbsp;</span>\n        <a href=\"#/settings\" class=\"button radius info right\">\n          <i class=\"fa fa-cog\" aria-hidden=\"true\"></i>\n          Settings\n        </a>\n      </div>\n\t\t</div>\n\t`,\n  \n  controller: class HeaderCtrl {\n    static get $inject() {\n      return ['$location'];\n    }\n    \n    constructor($location) {\n      this.$location = $location;\n    }\n    \n    isCurrent(path) {\n      return this.$location.path() === path;\n    }\n  }\n};\n\nexport default header;\n\n\n// WEBPACK FOOTER //\n// ./components/header.js","const help = {\n  template: `\n\t\t<div class=\"row help\">\n      <div class=\"small-12 columns\">\n        <h1>Help</h1>\n        <hr />\n        \n<p>        \nThe app presents an image divided into 16 equal pieces enumerated from left to right, top to bottom. The last 16th piece is missing.\nWhen the user hits “Start” the pieces are scrambled and the time counter starts counting until the user (using the arrow buttons) correctly rearranges the puzzle back to the initial state.\nCheck Wiki for more detailed game info https://en.wikipedia.org/wiki/15_puzzle \n</p>\n<p>\nAdditionally the user can go to another page which presents the leader board (that is 10 shortest games), the leader board also has a button to go back to the game page.\nNote! Using canvas for the scrambled image beats the purpose of this exercise.\n</p>\n\n<p>\nBonus:\n<p>\n<ul> \n<ol>Use of one of the popular frameworks – React/Angular/Backbone/etc..</ol>\n<ol>Use of swipe gestures, responsive design and in general the app should work on mobile devices</ol>\n<ol>Use of Bower or any other package manager</ol>\n<ol>Use of the local storage for the results</ol>\n<ol>Use key strokes (up down left right)</ol>\n<ol>Use CSS animation</ol>\n<ol>Make it possible to set the game board dimensions</ol>\n<ol>Present your solution as a git project</ol>\n</ul>\n\n<p>\nYou are allowed to use any frameworks, libraries or modules.        \n</p>\n     \n      </div>\n\t\t</div>\n\t`\n};\n\nexport default help;\n\n\n\n// WEBPACK FOOTER //\n// ./components/help.js","const leaders = {\n  template: `\n\t\t<div class=\"row leaders\">\n      <div class=\"small-12 columns\">\n        <h1>Leaders</h1>\n        <hr />\n        <ul class=\"unstyled-list\">\n            <li ng-repeat=\"(dimension, scoreList) in $ctrl.scores\">\n                <h2>Dimension: {{ dimension }}</h2>\n                 <ul class=\"unstyled-list\">\n                    <li ng-repeat=\"score in scoreList track by $index\">\n                        <span>username <strong>{{ score.username || 'unknown' }}</strong></span>\n                        <span>time <strong>{{ score.gameTime }}</strong> sec</span>\n                        <span>movesCount <strong>{{ score.movesCount }}</strong></span>\n                        <span>date <strong>{{ score.time | date:'medium'}}</strong></span>\n                    </li>\n                </ul>\n            </li>\n        </ul>\n      </div>\n\t\t</div>\n\t`,\n  \n  controller: class LeadersCtrl {\n    static get $inject() {\n      return ['storage']\n    }\n    \n    constructor(storage) {\n      this.$storage = storage.getStorage();\n      this.scores = {};\n      this.$storage.score.forEach((score) => {\n        if (!this.scores[score.dimension]) {\n          this.scores[score.dimension] = [];\n        }\n        this.scores[score.dimension].push(score);\n      });\n    }\n  }\n};\n\nexport default leaders;\n\n\n\n// WEBPACK FOOTER //\n// ./components/leaders.js","const settings = {\n  template: `\n\t\t<div class=\"row settings\">\n      <div class=\"small-12 columns\">\n        <h1>Settings</h1>\n        <hr />\n        <div class=\"dimension-preview\" ng-if=\"!$ctrl.isLoading\">\n            <canvas></canvas>\n        </div>\n        <div class=\"dimension-preview-loader\" ng-if=\"$ctrl.isLoading\">\n            <i class=\"fa fa-refresh fa-spin fa-3x fa-fw\"></i>\n        </div>\n        <h2>\n          <label>\n            Board dimensions\n            <input type=\"range\" min=\"2\" max=\"10\" ng-model=\"$ctrl.dimension\" ng-change=\"$ctrl.updateDimensionPreview()\">\n            <span>{{ $ctrl.dimension }}</span>\n          </label>\n        </h2>\n        <h2 ng-click=\"$ctrl.highlightRightPlace = !$ctrl.highlightRightPlace\">\n          <label>\n            <i class=\"fa fa-check-square-o\" aria-hidden=\"true\" ng-show=\"$ctrl.highlightRightPlace\"></i>\n            <i class=\"fa fa-square-o\" aria-hidden=\"true\" ng-show=\"!$ctrl.highlightRightPlace\"></i>\n            Highlight tile in right place (in this example used random color)\n          </label>\n        </h2>\n        <h2 ng-click=\"$ctrl.showNumber = !$ctrl.showNumber\">\n          <label>\n            <i class=\"fa fa-check-square-o\" aria-hidden=\"true\" ng-show=\"$ctrl.showNumber\"></i>\n            <i class=\"fa fa-square-o\" aria-hidden=\"true\" ng-show=\"!$ctrl.showNumber\"></i>\n            Show Numbers\n          </label>\n        </h2>\n       </div>\n\t\t</div>\n\t`,\n  \n  controller: class SettingsCtrl {\n    static get $inject() {\n      return ['$timeout', '$element', '$scope', 'storage', 'scramble'];\n    }\n    \n    constructor($timeout, $element, $scope, storage, scramble) {\n      this.$timeout = $timeout;\n      this.$element = $element;\n      this.$scope = $scope;\n      this.scramble = scramble;\n      this.$storage = storage.getStorage();\n      this.boardSize = storage.getBoardSize();\n    }\n    \n    $onInit() {\n      this.dimension = this.$storage.dimension;\n      this._showNumber = this.$storage.showNumber;\n      this._highlightRightPlace = this.$storage.highlightRightPlace;\n      this.updateDimensionPreview();\n    };\n    \n    get highlightRightPlace() {\n      return this._highlightRightPlace;\n    }\n    \n    set highlightRightPlace(val) {\n      this._highlightRightPlace = val;\n      this.$storage.highlightRightPlace = val;\n      this.updateDimensionPreview();\n    }\n    \n    get showNumber() {\n      return this._showNumber;\n    }\n    \n    set showNumber(val) {\n      this._showNumber = val;\n      this.$storage.showNumber = val;\n      this.updateDimensionPreview();\n    }\n    \n    updateDimensionPreview() {\n      this.isLoading = true;\n      this.$storage.dimension = this.dimension;\n      this.scramble.generate(this.dimension, this._showNumber, this._highlightRightPlace)\n        .then((ctx) => {\n          this.isLoading = false;\n          return this.$timeout(() => {\n            return ctx;\n          }, 0);\n        }).then((ctx) => {\n          let canvas = this.$element.find('canvas')[0];\n          let context = canvas.getContext('2d');\n          canvas.width = this.boardSize;\n          canvas.height = this.boardSize;\n          context.clearRect(0, 0, canvas.width, canvas.height);\n          context.putImageData(ctx.getImageData(0, 0, canvas.width, canvas.height), 0, 0);\n        }\n      );\n    }\n    \n  }\n};\n\nexport default settings;\n\n\n\n// WEBPACK FOOTER //\n// ./components/settings.js","class modalCtrl {\n  static get $inject() {\n    return ['score'];\n  }\n  \n  constructor(score) {\n    this.score = score;\n  }\n}\n\nexport default class modal {\n  \n  static get $inject() {\n    return ['$modal'];\n  }\n  \n  constructor($modal) {\n    this.$modal = $modal;\n  }\n  \n  openWin(dimension, time, movesCount) {\n    return this.$modal.open({\n      template: `\n        <div>\n          <h2>You win!</h2>\n          <h4>Your result: </h4>\n          <p>\n            <span>dimension: <strong>{{ modalCtrl.score.dimension}}</strong></span>\n            <span>time: <strong>{{ modalCtrl.score.time}}</strong> sec</span>\n            <span>moves: <strong>{{ modalCtrl.score.movesCount}}</strong></span>\n          </p>\n          <h3>Please, enter your name</h3>\n          <input type=\"text\" ng-model=\"modalCtrl.name\" style=\"font-size: 2em;\" autofocus />\n          <button class=\"button\" ng-click=\"$close(modalCtrl.name)\">OK</button>\n          <a class=\"close-reveal-modal\" ng-click=\"$dismiss()\">&#215;</a>\n        </div>\n      `,\n      backdrop: 'static',\n      keyboard: false,\n      windowClass: 'tiny',\n      controllerAs: 'modalCtrl',\n      controller: modalCtrl,\n      resolve: {\n        score: () => {\n          return {dimension, time, movesCount};\n        }\n      }\n    }).result.then(result => result, e => e);\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./services/modal.js","const getImage = ($q) => {\n  const deferred = $q.defer();\n  let img = new Image();\n  img.onload = function () {\n    deferred.resolve(this);\n  };\n  img.src = 'images/nature.jpg';\n  return deferred.promise;\n};\n\nexport default class scramble {\n  \n  static get $inject() {\n    return ['$q', 'storage'];\n  }\n  \n  constructor($q, storage) {\n    this.$q = $q;\n    this.$storage = storage.getStorage();\n    this.imagePromiseCache = null;\n    this.tiles = [];\n    this.maxFontSize = 72;\n  }\n  \n  imagePromise() {\n    if (!this.imagePromiseCache) {\n      this.imagePromiseCache = getImage(this.$q);\n    }\n    return this.imagePromiseCache;\n  }\n  \n  getTiles() {\n    if (this.tiles.length) {\n      return this.$q.when(this.tiles);\n    } else {\n      return this.generate(\n        this.$storage.dimension,\n        this.$storage.showNumber,\n        this.$storage.highlightRightPlace\n      ).then(() => {\n        return this.tiles;\n      });\n    }\n  }\n  \n  drawImagePart(ctx, img, i, j, tileSize, ratio, margin) {\n    ctx.drawImage(img,\n      i * tileSize * ratio,     // image-x\n      j * tileSize * ratio,     // image-y\n      tileSize * ratio,         // image-width\n      tileSize * ratio,         // image-height\n      i * tileSize + margin,    // canvas-x\n      j * tileSize + margin,    // canvas-y\n      tileSize - (margin * 2),  // canvas-width\n      tileSize - (margin * 2),  // canvas-height\n    );\n  };\n  \n  drawHighlight(ctx, i, j, tileSize, margin) {\n    ctx.strokeRect(\n      i * tileSize + margin,    // canvas-x\n      j * tileSize + margin,    // canvas-y\n      tileSize - (margin * 2),  // canvas-width\n      tileSize - (margin * 2)   // canvas-height\n    );\n  };\n  \n  drawNumber(ctx, fontSize, num, centerX, centerY) {\n    const strokeStyle = ctx.strokeStyle;\n    ctx.font = fontSize + 'px Arial';\n    ctx.textAlign = 'center';\n    ctx.lineWidth = 1;\n    ctx.strokeStyle = 'black';\n    ctx.strokeText(num.toString(), centerX + 1, centerY + 1);\n    ctx.lineWidth = 1;\n    ctx.strokeStyle = strokeStyle;\n    ctx.strokeText(num.toString(), centerX, centerY);\n  }\n  \n  getTileAsCanvas(img, i, j, tileSize, ratio, margin) {\n    let tileCanvas = document.createElement(\"canvas\");\n    let tileCtx = tileCanvas.getContext('2d');\n    tileCanvas.width = tileSize;\n    tileCanvas.height = tileSize;\n    tileCtx.clearRect(0, 0, tileCanvas.width, tileCanvas.height);\n    tileCtx.drawImage(img,\n      i * tileSize * ratio,     // image-x\n      j * tileSize * ratio,     // image-y\n      tileSize * ratio,         // image-width\n      tileSize * ratio,         // image-height\n      margin,                   // canvas-x\n      margin,                   // canvas-y\n      tileSize - (margin * 2),  // canvas-width\n      tileSize - (margin * 2),  // canvas-height\n    );\n    return tileCanvas;\n  };\n  \n  getImageFromTile(tile) {\n    if (tile.canvas) {\n      const margin = 3;\n      const w = tile.canvas.width;\n      const h = tile.canvas.height;\n      \n      let canvas = document.createElement(\"canvas\");\n      let ctx = canvas.getContext('2d');\n      \n      canvas.width = w;\n      canvas.height = h;\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n      ctx.drawImage(tile.canvas, 0, 0, w, h, 0, 0, w, h);\n      \n      if (this.$storage.highlightRightPlace) {\n        const equalX = tile.x === tile.position_x;\n        const equalY = tile.y === tile.position_y;\n        ctx.strokeStyle = (equalX && equalY) ? 'green' : 'red';\n        ctx.strokeRect(margin, margin, w - (margin * 2), h - (margin * 2));\n      } else {\n        ctx.strokeStyle = 'black';\n      }\n      \n      if (this.$storage.showNumber) {\n        const fontSize = (this.maxFontSize / this.$storage.dimension) * 2;\n        const centerX = (w / 2);\n        const centerY = (h / 2) + (fontSize / 2);\n        const num = ((tile.y * this.$storage.dimension) + tile.x) + 1;\n        this.drawNumber(ctx, fontSize, num, centerX, centerY);\n      }\n      \n      let a = canvas.toDataURL('image/png', false);\n      //let b = ctx.getImageData(0, 0, canvas.width, canvas.height);\n      //debugger;\n      return a;\n    } else {\n      return null;\n    }\n  }\n  \n  generate(dimension = 4, showNumber = true, highlightRightPlace = true) {\n    return this.imagePromise().then((img) => {\n        this.tiles = [];\n        \n        const previewSize = 480;\n        const margin = 3;\n        const tileSize = Math.floor(previewSize / dimension);\n        const ratio = img.width / previewSize;\n        \n        let canvas = document.createElement(\"canvas\");\n        let ctx = canvas.getContext('2d');\n        \n        canvas.width = previewSize;\n        canvas.height = previewSize;\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n        \n        for (let i = 0; i < dimension; i++) {\n          for (let j = 0; j < dimension; j++) {\n            if (i === dimension - 1 && j === dimension - 1) {\n              this.tiles.push({x: i, y: j, canvas: null});\n              continue;\n            }\n            this.tiles.push({x: i, y: j, canvas: this.getTileAsCanvas(img, i, j, tileSize, ratio, margin)});\n            this.drawImagePart(ctx, img, i, j, tileSize, ratio, margin);\n            if (highlightRightPlace) {\n              ctx.strokeStyle = (Math.random() > 0.5) ? 'red' : 'green';\n              this.drawHighlight(ctx, i, j, tileSize, margin);\n            } else {\n              ctx.strokeStyle = 'black';\n            }\n            if (showNumber) {\n              const fontSize = (this.maxFontSize / dimension) * 2;\n              const centerX = (i * tileSize) + (tileSize / 2);\n              const centerY = (j * tileSize) + (tileSize / 2) + (fontSize / 2);\n              const num = ((j * dimension) + i) + 1;\n              this.drawNumber(ctx, fontSize, num, centerX, centerY);\n            }\n          }\n        }\n        \n        return ctx;\n      }\n    );\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./services/scramble.js","export default class shuffle {\n  array(arr) {\n    // http://stackoverflow.com/questions/6274339/how-can-i-shuffle-an-array\n    const shuffleArray = (a) => {\n      for (let i = a.length; i; i--) {\n        let j = Math.floor(Math.random() * i);\n        [a[i - 1], a[j]] = [a[j], a[i - 1]];\n      }\n      return a;\n    };\n    return shuffleArray(arr);\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./services/shuffle.js","export default class stat {\n  \n  static get $inject() {\n    return ['$interval', 'storage'];\n  }\n  \n  constructor($interval, storage) {\n    this.$interval = $interval;\n    this.$storage = storage.getStorage();\n    this.startingTime = null;\n    this.movesCount = 0;\n    this.timerHandler = null;\n  }\n  \n  startGame() {\n    this.startingTime = +new Date();\n    this.endingTime = +new Date();\n    //this.endingTime = 0;\n    this.movesCount = 0;\n    this.timerHandler = this.$interval(() => {\n      //this.endingTime++;\n      this.endingTime = +new Date();\n    }, 1000);\n  }\n  \n  getMovesCount() {\n    return this.movesCount;\n  }\n  \n  getGameTime() {\n    return Math.floor((this.endingTime - this.startingTime) / 1000);\n    //return this.endingTime;\n  }\n  \n  isGameRunning() {\n    return !!this.timerHandler;\n  }\n  \n  doMove() {\n    this.movesCount++;\n  }\n  \n  isWin(tiles) {\n    const len = tiles.length;\n    for (let i = 0; i < len; i++) {\n      if (tiles[i].x !== tiles[i].position_x) {\n        return false;\n      }\n      if (tiles[i].y !== tiles[i].position_y) {\n        return false;\n      }\n    }\n    return true;\n  }\n  \n  stopGame() {\n    this.$interval.cancel(this.timerHandler);\n    this.timerHandler = undefined;\n  }\n  \n  saveResult(username, dimension, gameTime, movesCount) {\n    const time = +new Date();\n    this.$storage.score.push({username, dimension, gameTime, movesCount, time});\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./services/stat.js","export default class storage {\n  \n  static get $inject() {\n    return ['$localStorage'];\n  }\n  \n  constructor($localStorage) {\n    this.$storage = $localStorage.$default({\n      dimension: 4,  // standard value for 15-puzzle\n      showNumber: true,\n      highlightRightPlace: true,\n      score: [\n        // predefined results\n        { \"username\": \"Georgy\", \"dimension\": 4, \"gameTime\": 20, \"movesCount\": 10, \"time\": 1494096553227 }\n      ]\n    });\n  }\n  \n  getStorage() {\n    return this.$storage;\n  }\n  \n  getBoardSize() {\n    // check $boardSize sass variable\n    return 480;\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./services/storage.js","'use strict';\n\n// libs\nimport angular from 'angular';\nimport ngRoute from 'angular-route';\nimport hmTouchEvents from 'angular-hammer';\n\n// vendors\nimport 'angular-foundation/mm-foundation-tpls.js';\nimport 'ngstorage/ngStorage.min';\n\n// config\nimport RouteConfig from './app.route';\n\n// services\nimport scramble from './services/scramble';\nimport storage from './services/storage';\nimport shuffle from './services/shuffle';\nimport stat from './services/stat';\nimport modal from './services/modal';\n\n// components\nimport header  from './components/header';\nimport game    from './components/game';\nimport leaders from './components/leaders';\nimport settings from './components/settings';\nimport help from './components/help';\n\nimport './app.scss';\n\nangular.module('game', [ngRoute, hmTouchEvents, 'ngStorage', 'mm.foundation'])\n  .config(RouteConfig)\n  .service('scramble', scramble)\n  .service('storage', storage)\n  .service('shuffle', shuffle)\n  .service('stat', stat)\n  .service('modal', modal)\n  .component('header', header)\n  .component('game', game)\n  .component('leaders', leaders)\n  .component('settings', settings)\n  .component('help', help);\n\nangular.bootstrap(document, ['game']);\n\n\n\n// WEBPACK FOOTER //\n// ./app.js"],"sourceRoot":""}